<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>forEach</title>
<script type="text/javascript">
function choiceMenu(){
	let str = "";
	//querySelector는 값이 하나만 있을때 써야한다.
	document.querySelectorAll('.menu').forEach((item)=>{
		if(item.checked) str += item.value+ " ";
		item.checked=false;		
	});
	
	if(str=="")alert("하나 이상의 메뉴를 선택하세요")
	else alert(str);
}
// this는 현재 이벤트가 적용되고 있는 태그 자기자신을 가르킨다.
onload =() => {
	document.querySelectorAll(".menu").forEach(function(item){
		item.onclick = function(){
			let id = this.closest(".main-menu").attributes['id'].value;//자기자신의 가까운 값을 찾을 때 사용
			alert(id);
		} 
	});
	 
	//arrow 함수를 사용하고 this를 사용하면 우리가 사용하고자 하는 scope를 벗어나게됨. 원하는 결과를 얻을 수 없다.  
/* 	document.querySelectorAll(".menu").forEach((item)=>{
		item.onclick = ()=>{
			let id = this.closest(".main-menu").attributes['id'].value;//
		} 
	}); */
}

</script>
</head>
<body>
<h2>CheckBox Form..</h2>
<form action="#" name="frm">
<div class="main-menu" id="lunch">
	<strong>오늘 점심 드시고 싶은 메뉴를 고르세요. </strong><br><br>
	<input type="checkbox" name="menu" value="초밥" class="menu">초밥<br>
	<input type="checkbox" name="menu" value="우동" class="menu">우동<br>
	<input type="checkbox" name="menu" value="짜장면" class="menu">짜장면<br>
	<input type="checkbox" name="menu" value="카레라이스" class="menu">카레라이스<br>	
	<input type="button" value="선택" onclick="choiceMenu()">
	
	<button class="menus">Lunch Choice</button>
	
</div>

<div class="main-menu" id="dinner">
	<strong>오늘 저녁 드시고 싶은 메뉴를 고르세요. </strong><br><br>
	<input type="checkbox" name="menu" value="김치찌개" class="menu">김치찌개<br>
	<input type="checkbox" name="menu" value="통닭" class="menu">통닭<br>
	<input type="checkbox" name="menu" value="칼국수" class="menu">칼국수<br>
	<input type="checkbox" name="menu" value="곱창전골" class="menu">곱창전골<br>	
	<input type="button" value="선택" onclick="choiceMenu()">
	
	<button class="menus">Dinner Choice</button>
	
</div>
</form>